syntax = "proto3";
package gastrolog.v1;

option go_package = "gastrolog/api/gen/gastrolog/v1;gastrologv1";

// ForwardApplyRequest carries a pre-marshaled ConfigCommand for the leader
// to apply via raft.Apply(). Used by followers to proxy config writes.
message ForwardApplyRequest {
  bytes command = 1;
}

message ForwardApplyResponse {}

// EnrollRequest is sent by a joining node to the cluster leader.
// The token_secret proves the node is authorized to join.
message EnrollRequest {
  string token_secret = 1;
  string node_id = 2;
  string node_addr = 3;
}

// EnrollResponse returns the cluster TLS material to the joining node.
message EnrollResponse {
  bytes ca_cert_pem = 1;
  bytes cluster_cert_pem = 2;
  bytes cluster_key_pem = 3;
}

set dotenv-load

# Lists all available backend commands.
_default:
  @just --list

# Builds the gastrolog binary.
build:
  go build -o gastrolog ./cmd/gastrolog

# Runs the gastrolog backend with sqlite config (default).
run-sqlite:
  go run ./cmd/gastrolog -datadir data

# Runs the gastrolog backend with json config.
run-json:
  go run ./cmd/gastrolog -config-type json -datadir data

# Runs the gastrolog backend with in-memory config (no persistence).
run-memory:
  go run ./cmd/gastrolog -config-type memory

alias run := run-sqlite

# Runs the gastrolog backend with pprof server.
pprof:
  go run ./cmd/gastrolog -pprof localhost:6060

# Runs the gastrolog backend with REPL.
repl:
  go run ./cmd/gastrolog -repl

